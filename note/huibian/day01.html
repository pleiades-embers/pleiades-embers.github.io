<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>汇编基础 | embers</title>
    <meta name="description" content="余烬">
    <link rel="icon" href="/logo.jpg">
  <link rel="stylesheet" href="/css/style.css">
    
    <link rel="preload" href="/assets/css/0.styles.c107cf09.css" as="style"><link rel="preload" href="/assets/js/app.eea4310e.js" as="script"><link rel="preload" href="/assets/js/2.a0374f9c.js" as="script"><link rel="preload" href="/assets/js/13.f42fb1d6.js" as="script"><link rel="preload" href="/assets/js/6.f99bf8c4.js" as="script"><link rel="prefetch" href="/assets/js/10.83cd89fe.js"><link rel="prefetch" href="/assets/js/11.a46a3f49.js"><link rel="prefetch" href="/assets/js/12.4c0fcbeb.js"><link rel="prefetch" href="/assets/js/14.72efad17.js"><link rel="prefetch" href="/assets/js/15.9c1573bc.js"><link rel="prefetch" href="/assets/js/16.0391e1c1.js"><link rel="prefetch" href="/assets/js/17.850c6480.js"><link rel="prefetch" href="/assets/js/18.f2212ecf.js"><link rel="prefetch" href="/assets/js/19.1b98736c.js"><link rel="prefetch" href="/assets/js/20.d03cb66f.js"><link rel="prefetch" href="/assets/js/21.c8a13606.js"><link rel="prefetch" href="/assets/js/22.9ab5a9c1.js"><link rel="prefetch" href="/assets/js/23.1424a072.js"><link rel="prefetch" href="/assets/js/24.663e0ff4.js"><link rel="prefetch" href="/assets/js/25.69692971.js"><link rel="prefetch" href="/assets/js/26.575733fa.js"><link rel="prefetch" href="/assets/js/27.594d7ef0.js"><link rel="prefetch" href="/assets/js/28.1252255f.js"><link rel="prefetch" href="/assets/js/29.9ffba9f6.js"><link rel="prefetch" href="/assets/js/3.1d2ac0e8.js"><link rel="prefetch" href="/assets/js/30.e6372671.js"><link rel="prefetch" href="/assets/js/31.61bee863.js"><link rel="prefetch" href="/assets/js/32.8f73aa24.js"><link rel="prefetch" href="/assets/js/33.679f2783.js"><link rel="prefetch" href="/assets/js/34.97687ebb.js"><link rel="prefetch" href="/assets/js/35.1a434140.js"><link rel="prefetch" href="/assets/js/36.7ab8cbcd.js"><link rel="prefetch" href="/assets/js/37.246685f5.js"><link rel="prefetch" href="/assets/js/38.4c3abd23.js"><link rel="prefetch" href="/assets/js/39.b77e3c76.js"><link rel="prefetch" href="/assets/js/4.620dbc24.js"><link rel="prefetch" href="/assets/js/40.3aacfb2f.js"><link rel="prefetch" href="/assets/js/5.e40c23aa.js"><link rel="prefetch" href="/assets/js/7.5bac38f0.js"><link rel="prefetch" href="/assets/js/8.b636f602.js"><link rel="prefetch" href="/assets/js/9.12130c71.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c107cf09.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">embers</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/前端/" class="nav-link">前端</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">学习笔记</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>底层学习</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/huibian/" class="nav-link router-link-active">汇编</a></li><li class="dropdown-subitem"><a href="/note/linux/" class="nav-link">linux</a></li><li class="dropdown-subitem"><a href="/note/数据库/" class="nav-link">数据库</a></li></ul></li><li class="dropdown-item"><h4>高级语言</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/c++/" class="nav-link">c/c++</a></li><li class="dropdown-subitem"><a href="/note/python/" class="nav-link">python</a></li><li class="dropdown-subitem"><a href="/note/php/" class="nav-link">php</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">工具箱</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>在线编辑</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://tinypng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  图片压缩
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>在线服务</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.aliyun.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  阿里云
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://cloud.tencent.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  腾讯云
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>博客指南</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://juejin.im/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://blog.csdn.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/前端/" class="nav-link">前端</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">学习笔记</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>底层学习</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/huibian/" class="nav-link router-link-active">汇编</a></li><li class="dropdown-subitem"><a href="/note/linux/" class="nav-link">linux</a></li><li class="dropdown-subitem"><a href="/note/数据库/" class="nav-link">数据库</a></li></ul></li><li class="dropdown-item"><h4>高级语言</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/c++/" class="nav-link">c/c++</a></li><li class="dropdown-subitem"><a href="/note/python/" class="nav-link">python</a></li><li class="dropdown-subitem"><a href="/note/php/" class="nav-link">php</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">工具箱</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>在线编辑</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://tinypng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  图片压缩
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>在线服务</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.aliyun.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  阿里云
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://cloud.tencent.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  腾讯云
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>博客指南</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://juejin.im/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://blog.csdn.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>机器语言</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/note/huibian/day01.html" class="active sidebar-link">汇编基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/huibian/day01.html#寄存器" class="sidebar-link">寄存器</a></li><li class="sidebar-sub-header"><a href="/note/huibian/day01.html#查看cpu内存" class="sidebar-link">查看cpu内存</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>win32汇编与反汇编</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h3 id="汇编基础"><a href="#汇编基础" aria-hidden="true" class="header-anchor">#</a> 汇编基础</h3> <ul><li>地址总线的宽度决定了CPU的寻址能力</li> <li>数据总线的宽度决定了CPU与其他器件进行数据传送时的一次数据传送量</li> <li>控制总线的宽度决定了CPU对系统中其他器件的控制能力</li></ul> <h3 id="测试一"><a href="#测试一" aria-hidden="true" class="header-anchor">#</a> 测试一</h3> <p>（1）1个CPU的寻址能力为8KB，那么它的地址总线的宽度为 <u>13</u>位。</p> <blockquote><p>答：1KB=1024B，8KB=1024B*8=2^N，N=13。</p></blockquote> <p>（2）1KB的存储器有 <u>1024</u> 个存储单元，存储单元的编号从 0 到 <u>1023</u> 。</p> <blockquote><p>答：存储器的容量是以字节为最小单位来计算的，1KB=1024B</p></blockquote> <p>（3）1KB的存储器可以存储 <u>8192（2^13）</u>  个bit， 1024个Byte。</p> <blockquote><p>答：8Bit=1Byte，1024Byte=1KB（1KB=1024B=1024B*8Bit）。</p></blockquote> <p>（4） 8080、8088、80296、80386的地址总线宽度分别为16根、20根、24根、32根，则它们的寻址能力分别为: 64 （KB）、 1 （MB）、 16 （MB）、 4 （GB）。</p> <blockquote><p>答：一个CPU有N根地址线，则可以说这个CPU的地址总线的宽度为N。这样的CPU最多可以寻找2的N次方个内存单元。（一个内存单元=1Byte）。</p></blockquote> <p>（5）8080、8088、8086、80286、80386的数据总线宽度分别为8根、8根、16根、16根、32根。则它们一次可以传送的数据为: 1 （B）、 1 （B）、 2 （B）、 2 （B）、 4 （B）。</p> <blockquote><p>答：8根数据总线一次可以传送8位二进制数据（即一个字节）。</p></blockquote> <h2 id="寄存器"><a href="#寄存器" aria-hidden="true" class="header-anchor">#</a> 寄存器</h2> <ul><li><p>运算器进行信息处理</p></li> <li><p>寄存器进行信息存储</p></li> <li><p>控制器控制各种器件进行工作</p></li> <li><p>内部总线连接各种器件,在它们之间进行数据的传送</p> <p>对一个汇编程序员来说,cpu中的主要部件是寄存器,寄存器是cpu中程序员可以用指令读写的部件。程序员通过改变各种寄存器中的内容来实现对cpu的控制</p></li></ul> <p>测试二</p> <p>写出每条汇编指令执行后相关寄存器的值</p> <table><thead><tr><th>汇编指令</th> <th>寄存器值</th> <th>用高级语言描述</th></tr></thead> <tbody><tr><td>mov   ax,62627</td> <td>AX=F4A3H</td> <td>AX=F4A3H</td></tr> <tr><td>mov  ah,31H</td> <td>AX=31A3H</td> <td>ah=31h</td></tr> <tr><td>mov  al.23H</td> <td>AX=3223h</td> <td>al=23h</td></tr> <tr><td>add ax,ax</td> <td>AX=6246H</td> <td>ax=3223H+3223H</td></tr> <tr><td>mov bx,826ch</td> <td>BX=826cH</td> <td>bx=826ch</td></tr> <tr><td>mov cx,ax</td> <td>CX=6246H</td> <td>cx=6246h</td></tr> <tr><td>mov ax,bx</td> <td>AX=826CH</td> <td>ax=826ch</td></tr> <tr><td>add ax,bx</td> <td>AX=04D8H</td> <td>ax=6246h+826ch</td></tr> <tr><td>mov al.bh</td> <td>AX=0482H</td> <td>al=82h</td></tr> <tr><td>mov ah,bl</td> <td>AX=6C82H</td> <td>ah=6ch</td></tr> <tr><td>add ah,ah</td> <td>AX=D882H</td> <td>ah=6c+6c</td></tr> <tr><td>add al,6</td> <td>AX=D888H</td> <td>al=82+6</td></tr> <tr><td>add al,al</td> <td>AX=D810H</td> <td>al=88+88</td></tr> <tr><td>mov ax,cx</td> <td>AX=6246H</td> <td>ax=6246h</td></tr></tbody></table> <p>​	AX为16位寄存器  可分为 高8位和 低8位 分别是 ah,al</p> <h4 id="物理地址"><a href="#物理地址" aria-hidden="true" class="header-anchor">#</a> 物理地址</h4> <p><img src="https://raw.githubusercontent.com/pleiades-embers/images/master/20190922195115.png" alt=""></p> <ol><li><p>CPU中的相关部件提供两个16位的地址,一个为段地址，另一个为偏移地址</p></li> <li><p>段地址和偏移地址通过内部总线送入一个称为地址加法器的部件</p></li> <li><p>地址加法器将两个16位的地址合成为一个20位的物理地址</p></li> <li><p>地址加法器通过内部总线将20位物理地址送入输入输出控制电路</p></li> <li><p>输入输出控制电路将20位 物理地址送上地址总线</p></li> <li><p>20位物理地址被地址总线传送到存储器</p> <p>地址加法器采用<strong>物理地址=段地址16+偏移地址</strong>的方法用段地址和偏移地址合成物理地址。</p></li></ol> <p><img src="https://raw.githubusercontent.com/pleiades-embers/images/master/20190923201916.png" alt=""></p> <p>(1)给定段地址为0001H,仅通过变化偏移地址寻址,cpu的寻址范围为 <u>0010H</u> 到<u>1000FH</u></p> <blockquote><p>物理地址=SA*16+EA <br>
EA的变化范围为0h~ffffh <br>
物理地址范围为(SA*16+0h) ~(SA*16+ffffh) <br>
现在SA=0001h,那么寻址范围为 (00001H*16+0H)~(0001H*16 +ffffh)=0010h~1000fh</p></blockquote> <p>(2) 有一数据存放在内存20000H单元中，现给定段地址为SA，若想用偏移地址寻到此单元。则SA应满足的条件是：最小为 <u>1001H</u>  ，最大为 <u>2000H</u> 。</p> <blockquote><p>物理地址＝SA<em>16+EA     <br>
20000h＝SA</em>16+EA       <br>
SA=(20000h-EA)/16=2000h-EA/16<br>
EA取最大值时,SA=2000h-ffffh/16=1001h,SA为最小值    <br>
EA取最小值时,SA=2000h-0h/16=2000h,SA为最大值</p></blockquote> <h4 id="段寄存器"><a href="#段寄存器" aria-hidden="true" class="header-anchor">#</a> 段寄存器</h4> <p>​	8086CPU 有4个段寄存器 CS 、DS、 SS、 ES</p> <p>​	Code segment 	Data segment 	Stack segment 	Extract segment</p> <ol><li><p>​	从cs:ip  指向内存单元读取指令,读取的指令进入指令缓冲器</p></li> <li><p>IP=IP+所读取指令的长度,从而指向下一条指令;</p></li> <li><p>执行指令. 转到步骤1 .重复这个过程</p></li></ol> <h2 id="查看cpu内存"><a href="#查看cpu内存" aria-hidden="true" class="header-anchor">#</a> 查看cpu内存</h2> <p>1）下载DOSBOX</p> <p>工具介绍：DOSBox 是一个 DOS 模拟程序，由于它采用的是 SDL 库，所以可以很方便的移植到其他的平台。目前，DOSBox 已经支持在 Windows、Linux、Mac OS X、BeOS 、palmOS、Android 、webOS、os/2等系统中运行。不少DOS下的游戏都可以直接在该平台上运行。</p> <p>工具官网：http://www.dosbox.com/</p> <p>2）配置DOSBOX</p> <p>创建一个用于保存汇编工具（如MASM、Link、DEBUG等工具）和汇编文件（*.asm）的目录，如：D:\DEBUG。</p> <p>打开DOSBOX的安装根目录（默认安装路径：C:\Program Files\DOSBox-0.74；若是64位的系统，则默认安装路径：C:\Program Files (x86)\DOSBox-0.74），双击文件DOSBox 0.74 Options.bat，运行该批处理文件后系统会用文本文档Notepad打开配置文件dosbox-0.74.conf。</p> <p>将光标定位到dosbox-0.74.conf文件的[autoexec]节点（一般在该文件末尾），在文件中添加以下内容：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code>MOUNT C D<span class="token operator">:</span>\DEBUG                  # 将目录D<span class="token operator">:</span>\DEBUG挂载为DOSBOX下的C<span class="token operator">:</span>
set PATH<span class="token operator">=</span>$PATH$<span class="token punctuation">;</span>D<span class="token operator">:</span>\DEBUG          # 将D<span class="token operator">:</span>\DEBUG写入环境变量PATH中
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>在下载一个 debug.exe 放到 挂载目录下</p> <p>切换到挂载虚拟光驱 运行debug</p> <p>d</p> <ul><li><p>用Debug 的R命令查看，改变cpu寄存器的内容</p> <ul><li>r ax(cs ip 等) 修改寄存器ax(cs ip)等 的值</li></ul></li> <li><p>用debug的D命令查看内存中的内容</p> <ul><li>d 1000:0 lf (lf)表示范围</li></ul></li> <li><p>用debug的E命令改写内存中的内容</p> <ul><li>e 1000:0 30 31 32 33 34 (一次性修改)</li> <li>e 1000:0 &quot;a&quot; &quot;b&quot; &quot;c&quot;  asscal(阿斯克码修改)</li> <li>e 1000:0 (询问式修改)</li></ul></li> <li><p>用debug的U命令将内存中的机器指令翻译成汇编指令</p> <ul><li>u 1000:0 lf (lf表示范围)</li></ul></li> <li><p>用debug的T命令执行一条机器指令</p></li> <li><p>写入指令</p> <ul><li>e 1000:0 b8 01 00 b9 02 00 01 08 (写入机器码)</li> <li>a 1000:0  mov ax.20H 写入汇编</li></ul></li></ul> <ol><li>字在内存中存储时,要用两个地址连续的内存单元来存放,字的地位字节存放在低地址单元中,高位字节存放在高地址单元中</li> <li>用mov指令访问内存单元，可以在mov指令中只给出单元的偏移地址，此时，段地址默认在ds寄存器中</li> <li>在内存和寄存器之间传送字型数据时,高地址单元和高8位寄存器,低地址单元和低8位寄存器相对应</li> <li>mov,add,sub 是具有两个操作对象的指令，jmp是具有一个操作对象的指令</li></ol> <h4 id="debug-测试题"><a href="#debug-测试题" aria-hidden="true" class="header-anchor">#</a> DEBUG 测试题</h4> <ol><li>在DEBUG中，用 “D 0:0” lf&quot;查看内存，结果如下：</li></ol> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token number">0000</span><span class="token operator">:</span><span class="token number">0000</span> <span class="token number">70</span> <span class="token number">80</span> F0 <span class="token number">30</span> EF <span class="token number">60</span> <span class="token number">30</span> E2<span class="token operator">-</span><span class="token number">00</span> <span class="token number">80</span> <span class="token number">80</span> <span class="token number">12</span> <span class="token number">66</span>  <span class="token number">20</span> <span class="token number">22</span> <span class="token number">60</span>  
<span class="token number">0000</span><span class="token operator">:</span><span class="token number">0010</span> <span class="token number">62</span> <span class="token number">26</span> E6 D6 CC <span class="token number">2</span>E  <span class="token number">3</span>C <span class="token number">3</span>B<span class="token operator">-</span>AB BA <span class="token number">00</span> <span class="token number">00</span> <span class="token number">26</span> <span class="token number">06</span> <span class="token number">66</span> <span class="token number">88</span>  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>下面的程序执行前,AX=0,BX=0,写出每条汇编指令执行完后相关寄存器中的值</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code>mov ax<span class="token punctuation">,</span><span class="token number">1</span> 
mov ds<span class="token punctuation">,</span>ax 
mov ax<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">0000</span><span class="token punctuation">]</span>  ax<span class="token operator">=</span> <span class="token number">2662</span>H  
mov bx<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">0001</span><span class="token punctuation">]</span>  bx<span class="token operator">=</span> E626H  
mov ax<span class="token punctuation">,</span>bx      ax<span class="token operator">=</span> E626H  
mov ax<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">0000</span><span class="token punctuation">]</span>  ax<span class="token operator">=</span> <span class="token number">2662</span>H  
mov bx<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">0002</span><span class="token punctuation">]</span>  bx<span class="token operator">=</span> D6E6H  
add ax<span class="token punctuation">,</span>bx      ax<span class="token operator">=</span> FD48H  
add ax<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">0004</span><span class="token punctuation">]</span>  ax<span class="token operator">=</span> <span class="token number">2</span>C14H  
mov ax<span class="token punctuation">,</span><span class="token number">0</span>       ax<span class="token operator">=</span>   <span class="token number">0</span>    
mov al<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">0002</span><span class="token punctuation">]</span>  ax<span class="token operator">=</span> <span class="token number">00e6</span>H  
mov bx<span class="token punctuation">,</span><span class="token number">0</span>       bx<span class="token operator">=</span>   <span class="token number">0</span>    
mov bl<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">000</span>c<span class="token punctuation">]</span>  bx<span class="token operator">=</span> <span class="token number">0026</span>H  
add al<span class="token punctuation">,</span>bl      ax<span class="token operator">=</span> <span class="token number">000</span>CH  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><div id="gitalk-container"></div></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/note/huibian/day02.html">Win32汇编与反汇编</a>→
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.eea4310e.js" defer></script><script src="/assets/js/2.a0374f9c.js" defer></script><script src="/assets/js/13.f42fb1d6.js" defer></script><script src="/assets/js/6.f99bf8c4.js" defer></script>
  </body>
</html>
